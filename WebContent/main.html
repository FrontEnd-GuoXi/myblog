<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="./css/main_style.css">
	<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</head>
<body>
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	    <div class="container-fluid">
	    <div class="navbar-header">
	        <span class="navbar-brand">笑傲江湖</span>
	    </div>
	    <div class="wrap-nav">
	        <ul class="nav navbar-nav">
	            <li class="active"><a href="javascript:void(0)">首页</a></li>
	            <li><a href="#">关于</a></li>
	            <li><a href="#">微博</a></li>
	            <li><a href="#">存档</a></li>
	            <li><a href="#">留言薄</a></li>
	            <li><a href="#">友情链接</a></li>
	        </ul>
	    </div>
	    </div>
	</nav>
<div class="article-wrap">

</div>
	<footer class="page-wrap">
		<nav aria-label="...">
		  <ul class="pager">
		    <li><a href="#">上一页</a></li>
		    <li><a href="#">下一页</a></li>
		  </ul>
		</nav>
	</footer>
</body>

<script type="text/javascript">
	
	$(function(){
        var start = 0,
            end = 2;


        init();
        function init(){
        	promiseAjax(start,end).then(
        		(str)=>{
        			$(".article-wrap").html(str);
        	},
        		(jqXHR)=>{
        			console.log(jqXHR);
        		});
        }

 		function promiseAjax(start,end){
 			return new Promise((resolve,reject)=>{
 				console.log("1")
  					ajaxArticle(start,end,resolve,reject);
 			});
 		}	

 		function ajaxArticle(start,end,resolve,reject){
	     	$.ajax({
	     		url:'http://localhost:8080/myBlog/home?username=000000&start='+start+'&end='+end,
	     		type:'GET',
	     		dataType:'json',
	     		success:function(data){
	     			console.log("2")
	     			  let str = "";
	     			  for(let i=0; i<2; i++){
						  str +=`<div class="article-row">`;
		 						for(let j=0; j<3; j++){
								   str +=`<div class="article-item">
									      	<h2 class="article-title">${data.title}</h2>
									      	<p class="article-content">${data.content}</p>
									      </div>`;
		 						}
	 					   str += `</div>`;
	     			  }
	     			resolve(str);
	     		},
	     		error:function(jqXHR,textStatus,errorThrown){
	     			console.log(textStatus,errorThrown);
	     			reject(jqXHR);
	     		}
	     	});
 		}

	});

</script>

</html>